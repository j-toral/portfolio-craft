{% extends '_layouts/layout' %}

{% set blocks = entry.chapterContentBuilder.all() %}
{% set heroImage = entry.heroBackground.one() %}

{% block main %}
  <main class="pt-20">
    {# Hero Section #}
    <div id="chapter-heading" class="container mx-auto text-center px-4 pt-4 lg:pt-12">
      <h2 class="uppercase mb-3 lg:mb-5">{{ entry.title }}</h2>
      <h1 class="uppercase">{{ entry.chapterTitle }}</h1>
    </div>

    <div id="hubVideo" class="mt-12">
      <div class="container mx-auto">
        <div style="padding:56.25% 0 0 0;position:relative;">
          <iframe src="https://player.vimeo.com/video/{{ entry.videoID }}?h=d8b0d8f55d&amp;badge=0{% if entry.videoOptions.contains('autoplay') %}&amp;autoplay=1{% endif %}{% if not entry.videoOptions.contains('controls') %}&amp;controls=0{% endif %}{% if entry.videoOptions.contains('loop') %}&amp;loop=1{% endif %}&amp;byline=0&amp;portrait=0&amp;title=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;" title="Video"></iframe>
        </div>
        <script src="https://player.vimeo.com/api/player.js"></script>
      </div>
    </div>
    {# END of Hero Section #}

    {# Page Content #}
    {% if blocks|length %}
      {% for block in blocks %}
        {% if block.image %}
          {% set blImage = block.image.one() %}
        {% endif %}
        {% switch block.type %}
        {% case "insetFiftyFifty" %}
          <div class="{% if block == blocks|first %}mt-20{% endif %}">
            <div class="container mx-auto grid grid-cols-1 lg:grid-cols-2">
              {% if block.image %}
                <div class="flex px-4 justify-center items-center order-last lg:order-none">
                  <div>
                    <img src="{{ blImage.url }}" alt="{% if blImage.alt %}{{ blImage.alt }}{% else %}Alt Text {{ entry.title }}{% endif %}">
                  </div>
                </div>
              {% endif %}
              <div class="flex flex-col justify-center items-center {% if block.desktopOrder %}lg:order-first{% endif %}">
                <div class="p-8 {% if block == blocks|first %}lg:pb-16 xl:pb-24{% else %}lg:py-16 xl:py-24{% endif %} lg:px-12 xl:px-20">
                  {% if block.introText %}
                    <div class="text-xl md:text-2xl mb-6 prose text-black max-w-none">
                      {{ block.introText | retconAttr('*', { 'class': 'text-black' }, false) }}
                    </div>
                  {% endif %}
                  {% if block.bodyText %}
                    <div class="prose text-black max-w-none">
                      {{ block.bodyText | retconAttr('*', { 'class': 'text-black' }, false) }}
                    </div>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        {% case "fullWidthImage" %}
          {% if blImage %}
            <div class="{% if block == blocks|first %}mt-20{% endif %} block pt-8 xl:pt-20">
              <div{% if block.displayWidth %} class="container mx-auto"{% endif %}>
                <img src="{{ blImage.url }}" alt="{% if blImage.alt %}{{ blImage.alt }}{% endif %}">
              </div>
            </div>
          {% endif %}
        {% case "fiftyfifty" %}
          <div>
            <div class="{% if block == blocks|first %}mt-20{% endif %} container mx-auto grid grid-cols-1 lg:grid-cols-2">
              {% if block.image %}
                <div class="relative aspect-video lg:aspect-auto 2xl:min-h-[500px] order-last lg:order-none">
                  <div class="absolute inset-0">
                    <img class="h-full w-full object-cover" src="{{ blImage.url }}" alt="{% if blImage.alt %}{{ blImage.alt }}{% else %}Alt Text{% endif %}" loading="lazy">
                  </div>
                </div>
              {% endif %}
              <div class="flex flex-col justify-center items-center {% if block.desktopOrder %}lg:order-first{% endif %}">
                <div class="p-8 lg:p-16 xl:p-24">
                  {% if block.introText %}
                    <div class="text-xl md:text-2xl mb-6 prose text-black max-w-none">
                      {{ block.introText | retconAttr('*', { 'class': 'text-black' }, false) }}
                    </div>
                  {% endif %}
                  {% if block.bodyText %}
                    <div class="prose text-black max-w-none">
                      {{ block.bodyText | retconAttr('*', { 'class': 'text-black' }, false) }}
                    </div>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        {% endswitch %}
      {% endfor %}
    {% endif %}
    {# END of Page Content #}
  </main>

{% endblock %}